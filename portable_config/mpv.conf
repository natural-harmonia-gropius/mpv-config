# log-file=~~/mpv.log
msg-level=ffmpeg=error,cplayer=warn,auto_profiles=warn,autoload=warn,autocrop=warn

script-opts-append=uosc-languages=~~/zh-hans-ex.json,zh-hans
script-opts-append=uosc-scale=1.25
script-opts-append=uosc-menu_min_width=200
script-opts-append=uosc-menu_item_height=44
script-opts-append=uosc-top_bar_persistency=idle
script-opts-append=uosc-top_bar_position=no
script-opts-append=uosc-controls=never
script-opts-append=uosc-progress=never
script-opts-append=uosc-timeline_style=bar
script-opts-append=uosc-timeline_step=-5
script-opts-append=uosc-chapter_ranges=openings:81cfff80,endings:81cfff80,ads:ffe26480
script-opts-append=uosc-color=foreground=fffbfe,foreground_text=1c1b1f,background=1c1b1f,background_text=fffbfe,curtain=000000,success=a5e075,error=ff616e

script-opts-append=thumbfast-max_width=320
script-opts-append=thumbfast-max_height=320

script-opts-append=celebi-volume=yes
script-opts-append=celebi-mute=yes

script-opts-append=autoload-directory_mode=ignore
script-opts-append=autoload-same_type=yes

script-opts-append=autocrop-auto=no
script-opts-append=autocrop-detect_round=4
script-opts-append=autocrop-detect_min_ratio=0.74
script-opts-append=autocrop-suppress_osd=yes
# script-opts-append=autocrop-keybind=

osd-font=Segoe UI Variable Display
script-opts-append=stats-font=
# script-opts-append=console-font=Cascadia Code

no-osc
no-osd-bar
no-title-bar

snap-window
autofit-larger=96%x88%
autofit-smaller=33%x66%

keep-open
save-position-on-quit
resume-playback-check-mtime
watch-later-options=start,vid,aid,sid
reset-on-next-file=pause,loop-file,brightness,contrast,gamma,saturation,hue,deinterlace,vf,af

input-default-bindings=no
input-doubleclick-time=200

image-display-duration=inf

screenshot-template="%{media-title}-%p-%n"
screenshot-format=avif

audio-file-auto=fuzzy
alang=ja,jpn,en,eng,zh,zho,chi

volume-max=100

sub-auto=fuzzy
slang=zh-hans,zh-cn,zh-hans-cn,zh-sg,zh-hans-sg,sc,chs,zh-hant,zh-hk,zh-hant-hk,zh-mo,zh-hant-mo,zh-tw,zh-hant-tw,tc,cht,zh,zho,chi,en,eng,ja,jpn

sub-font-size=36
sub-back-color=0.0/0.0/0.0/0.75
sub-border-size=0
sub-shadow-offset=4
sub-shadow-color=0.0/0.0/0.0/0.0

hwdec

vo=gpu-next

glsl-shader=~~/shaders/hdeband.glsl

glsl-shader=~~/shaders/ravu-zoom-ar-r3.glsl
glsl-shader=~~/shaders/KrigBilateral.glsl

scale=ewa_lanczos
cscale=
dscale=

hdr-contrast-recovery=0.30
hdr-peak-percentile=99.995
allow-delayed-peak-detect=no

glsl-shader=~~/shaders/hdr-toys/utils/flip.glsl

# dither-depth=auto
dither-depth=8

# video-sync=display-resample

# interpolation
# tscale=oversample

[bt.2100-pq]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "pq"
profile-restore=copy
target-prim=bt.2020
target-trc=pq
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/pq_inv.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886.glsl

[bt.2100-hlg]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "hlg"
profile-restore=copy
target-prim=bt.2020
target-trc=hlg
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/hlg_inv.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886.glsl

[bt.2020]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "bt.1886"
profile-restore=copy
target-prim=bt.2020
target-trc=bt.1886
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886_inv.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886.glsl

[dovi-p5]
profile-cond=get("video-params/primaries") == "bt.709" and get("video-params/gamma") == "bt.1886" and get("video-out-params/max-luma") > 203
profile-restore=copy
target-prim=bt.2020
target-trc=pq
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/pq_inv.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886.glsl

[openexr]
profile-cond=get("file-format") == 'exr_pipe'
profile-restore=copy
target-prim=bt.2020
target-trc=linear
glsl-shader=~~/shaders/hdr-toys/utils/clip_black.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/jedypod.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886.glsl

[interp]
hr-seek-framedrop=no
vf-add=@interp:vapoursynth=~~/filters/interp.py:1

[interp-inverse]
hr-seek-framedrop
vf-add=@interp:!vapoursynth=~~/filters/interp.py:1

[interlaced]
profile-cond=get("video-frame-info/interlaced")
deinterlace

[low-res]
profile-cond=width * height <= 1280 * 720
profile-restore=copy-equal
glsl-shaders-pre=~~/shaders/adaptive-sharpen.glsl
glsl-shaders-pre=~~/shaders/nlmeans.glsl

[ending]
profile-cond=get("time-remaining", 0) <= 60
profile-restore=copy-equal
save-position-on-quit=no

[shorts]
profile-cond=duration <= 60 and get("current-tracks/video/albumart") == false
profile-restore=copy-equal
loop-file=inf

[moment]
profile-cond=0 < duration and duration < 0.1
profile-restore=copy-equal
pause

[audio]
profile-cond=get("current-tracks/audio/type") and get("current-tracks/video/albumart") ~= false
profile-restore=copy-equal
prefetch-playlist

[image]
profile-cond=get("current-tracks/video/image") and get("current-tracks/video/albumart") == false
profile-restore=copy-equal
script-opts-append=inputevent-configs=input.conf,~~/input.image.conf

[gray]
profile-cond=get("video-params/pixelformat") == "gray"
profile-restore=copy-equal
dscale=gaussian
glsl-shaders=

[idle]
profile-cond=get("idle-active", false)
profile-restore=copy-equal
script-opts-append=inputevent-configs=input.conf,~~/input.idle.conf

[background]
profile-cond=not focused and get("current-tracks/video/albumart") == false
profile-restore=copy-equal
pause

[end]
profile-cond=get("eof-reached", false)
profile-restore=copy-equal
fullscreen=no
window-maximized=no
