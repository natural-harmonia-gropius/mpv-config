# log-file=~~/mpv.log

msg-level=auto_profiles=warn,autocrop=warn,autoload=warn,cplayer=warn

script-opts-add=autocrop-auto=no
script-opts-add=autocrop-detect_round=4
script-opts-add=autocrop-detect_min_ratio=0.74
script-opts-add=autocrop-suppress_osd=yes
script-opts-add=autocrop-keybind=

script-opts-add=uosc-ui_scale=1.2
script-opts-add=uosc-window_border_size=0
script-opts-add=uosc-top_bar_persistency=idle
script-opts-add=uosc-controls=
script-opts-add=uosc-timeline_persistency=
script-opts-add=uosc-timeline_style=bar
script-opts-add=uosc-chapter_ranges="openings:81cfff80,endings:81cfff80,ads:ffe26480"
script-opts-add=uosc-foreground=FFFBFE
script-opts-add=uosc-foreground_text=1C1B1F
script-opts-add=uosc-background=1C1B1F
script-opts-add=uosc-background_text=FFFBFE
script-opts-add=uosc-languages="~~/custom.json,slang,en"

script-opts-add=uosc-timeline_size_min=0
script-opts-add=uosc-timeline_size_min_fullscreen=0
script-opts-add=uosc-timeline_size_max=40
script-opts-add=uosc-timeline_size_max_fullscreen=40
script-opts-add=uosc-controls_size=32
script-opts-add=uosc-controls_size_fullscreen=32
script-opts-add=uosc-volume_size=40
script-opts-add=uosc-volume_size_fullscreen=40
script-opts-add=uosc-menu_item_height=48
script-opts-add=uosc-menu_item_height_fullscreen=48
script-opts-add=uosc-menu_min_width=200
script-opts-add=uosc-menu_min_width_fullscreen=200
script-opts-add=uosc-top_bar_size=40
script-opts-add=uosc-top_bar_size_fullscreen=40
script-opts-add=thumbfast-max_width=320
script-opts-add=thumbfast-max_height=320

osd-font="Segoe UI Variable Display"

no-osc
no-osd-bar
no-border

snap-window
autofit-larger=100%x88%
autofit-smaller=33%x66%

keep-open
save-position-on-quit
resume-playback-check-mtime
watch-later-options=start,vid,aid,sid,pause,volume,mute,deinterlace,audio-delay,sub-delay
reset-on-next-file=vf,af,pause,brightness,contrast,gamma,saturation,hue

no-input-default-bindings
input-doubleclick-time=200

image-display-duration=inf

screenshot-template="%{media-title}-%P-%n"
# screenshot-format=jxl

sub-font-size=36
sub-border-size=0
sub-back-color=0.0/0.0/0.0/0.75
sub-shadow-offset=4
sub-shadow-color=0.0/0.0/0.0/0.0

sub-auto=fuzzy
slang=zh-Hans,zh-cn,zh-hans-cn,zh-sg,zh-hans-sg,zh,chs,sc,zh-Hant,zh-hk,zh-mo,zh-tw,zh-hant-hk,zh-hant-mo,zh-hant-tw,zho,cht,tc,chi,eng,en,jpn,ja

audio-file-auto=fuzzy
alang=jpn,ja,eng,en,chi,zh

hwdec=auto-safe

vo=gpu-next
# gpu-api=vulkan

deband
deband-iterations=4
deband-threshold=48
deband-range=16
deband-grain=16

glsl-shader=~~/shaders/ravu-zoom-r3.glsl
glsl-shader=~~/shaders/KrigBilateral.glsl

scale=lanczos
correct-downscaling

glsl-shader=~~/shaders/SSimSuperRes.glsl
glsl-shader=~~/shaders/SSimDownscaler.glsl

dither-depth=8

# video-sync=display-resample
# tscale=oversample
# interpolation

[bt.2020]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "bt.1886"
profile-restore=copy
target-trc=bt.1886
target-prim=bt.2020
glsl-shader=~~/shaders/hdr-toys/transfer-function/bt1886_to_linear.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/compress.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/linear_to_bt1886.glsl

[bt.2100-hlg]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "hlg"
profile-restore=copy
target-trc=hlg
target-prim=bt.2020
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/hlg_to_l.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/l_to_linear.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/compress.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/linear_to_bt1886.glsl

[bt.2100-pq]
profile-cond=get("video-params/primaries") == "bt.2020" and get("video-params/gamma") == "pq"
profile-restore=copy
target-trc=pq
target-prim=bt.2020
glsl-shader=~~/shaders/hdr-toys/utils/clip_both.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/pq_to_l.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/l_to_linear.glsl
glsl-shader=~~/shaders/hdr-toys/utils/chroma_correction.glsl
glsl-shader=~~/shaders/hdr-toys/tone-mapping/dynamic.glsl
glsl-shader=~~/shaders/hdr-toys/gamut-mapping/compress.glsl
glsl-shader=~~/shaders/hdr-toys/transfer-function/linear_to_bt1886.glsl

[interp]
profile-restore=copy
hr-seek-framedrop=no
vf-add=@interp:vapoursynth=~~/filters/interp.py:1

[interp-inverse]
hr-seek-framedrop
vf-add=@interp:!vapoursynth=~~/filters/interp.py:1

[interlaced]
profile-cond=deinterlace or (get("video-frame-info/interlaced") and not deinterlace)
profile-restore=copy
deinterlace

[shorts]
profile-cond=duration < 60 and get("current-tracks/video/image") == false
profile-restore=copy
loop-file=inf
save-position-on-quit=no

[music]
profile-cond=aid and not get("current-tracks/video/albumart") == false
profile-restore=copy-equal
prefetch-playlist

[image]
profile-cond=get("current-tracks/video/image")
profile-restore=copy-equal
dither=error-diffusion

[gray]
profile-cond=get("video-params/pixelformat") == "gray"
profile-restore=copy-equal
scale=gaussian
glsl-shaders=""

[background]
profile-cond=not focused and get("current-tracks/video/albumart") == false
profile-restore=copy-equal
pause

[idle]
profile-cond=idle_active
profile-restore=copy-equal
script-opts-add=inputevent-configs="input.conf,~~/input.idle.conf"

[end]
profile-cond=eof_reached
profile-restore=copy-equal
fullscreen=no
window-maximized=no
