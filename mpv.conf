# log-file=~~/mpv.log
msg-level=display-tags=error,auto_profiles=error,autoload=error,autocrop=error

script-opts-add=autocrop-auto=no
script-opts-add=autocrop-detect_round=4
script-opts-add=autocrop-detect_min_ratio=0.74
script-opts-add=autocrop-suppress_osd=yes
script-opts-add=autocrop-keybind=""

no-input-default-bindings

no-osc
no-osd-bar
no-border
osd-font="Segoe UI Variable Display"
script-opts-add=uosc-pause_on_click_shorter_than=200
script-opts-add=uosc-foreground=FFFBFE
script-opts-add=uosc-foreground_text=1C1B1F
script-opts-add=uosc-background=1C1B1F
script-opts-add=uosc-background_text=FFFBFE
script-opts-add=uosc-curtain_opacity=0.3
script-opts-add=uosc-menu_item_height=48
script-opts-add=uosc-menu_item_height_fullscreen=60
script-opts-add=uosc-menu_min_width=200
script-opts-add=uosc-menu_min_width_fullscreen=300
script-opts-add=uosc-controls=""
script-opts-add=uosc-timeline_persistency=""
script-opts-add=uosc-timeline_style=bar
script-opts-add=uosc-chapter_ranges="openings:81cfff80,endings:81cfff80,ads:ffe26480"
script-opts-add=thumbfast-max_height=320
script-opts-add=thumbfast-max_width=320

snap-window
autofit-larger=100%x88%
autofit-smaller=66%

keep-open
save-position-on-quit
resume-playback-check-mtime
watch-later-options=vid,aid,sid,pause,volume,mute,deinterlace
reset-on-next-file=vf,af,pause,brightness,contrast,gamma,saturation,hue

image-display-duration=inf
screenshot-template="%{media-title}-%P-%n"
screenshot-format=png
screenshot-high-bit-depth
screenshot-tag-colorspace

sub-auto=fuzzy
slang=zh-Hans,zh-cn,zh-hans-cn,zh-sg,zh-hans-sg,chs,sc,zh-Hant,zh-hk,zh-mo,zh-tw,zh-hant-hk,zh-hant-mo,zh-hant-tw,cht,tc,zh,chi,eng,en,jpn,ja

audio-file-auto=fuzzy
alang=jpn,ja,eng,en,chi,zh

vo=gpu-next
hwdec=auto-safe
gpu-api=vulkan

glsl-shader=~~/shaders/ravu-zoom-r3.glsl
glsl-shader=~~/shaders/KrigBilateral.glsl

deband
deband-iterations=4
deband-threshold=24
deband-range=8
deband-grain=16

scale=ewa_lanczos
correct-downscaling

hdr-compute-peak=no

dither-depth=auto

# video-sync=display-resample
# tscale=oversample
# interpolation

[passthrough]
target-colorspace-hint
# inverse-tone-mapping

[rec2020]
profile-cond=p["video-params/primaries"] == "bt.2020" and p["video-params/gamma"] == "bt.1886"
profile-restore=copy
# target-prim=bt.2020
# target-lut=~~/luts/Rec202012-bit_Rec2020-Rec202012-bit_Rec709.cube
# target-lut=~~/luts/GamutMapping_ITU-R_BT.2020_to_ITU-R_BT.709_Gamma_2.4_129x129x129.cube

[rec2100-pq]
profile-cond=p["video-params/primaries"] == "bt.2020" and p["video-params/gamma"] == "pq"
profile-restore=copy
target-peak=100
# target-trc=pq
# target-prim=bt.2020
# target-lut=~~/luts/BT2446_BT2407_HDR10_to_SDR_1000nits_rev03.cube

[rec2100-hlg]
profile-cond=p["video-params/primaries"] == "bt.2020" and p["video-params/gamma"] == "hlg"
profile-restore=copy
target-trc=hlg

[interp]
profile-cond=1 < container_fps and container_fps <= display_fps / 2 and speed == 1 and dwidth * dheight <= 3840 * 2160
profile-restore=copy
vf-add=@interp:vapoursynth=~~/filters/interp.py:1
hr-seek-framedrop=no

[interp-inverse]
vf-remove=@interp
vf-add=@interp:!vapoursynth=~~/filters/interp.py:1
hr-seek-framedrop

[interlaced]
profile-cond=deinterlace or (p["video-frame-info/interlaced"] and not deinterlace)
profile-restore=copy
deinterlace

[lq]
profile-cond=p["video-params/average-bpp"] < 24
profile-restore=copy
deband-threshold=48
deband-grain=24

[fhd+]
profile-cond=dwidth * dheight > 1920 * 1080
profile-restore=copy
deband-iterations=1
deband-range=32

[uhd+]
profile-cond=dwidth * dheight > 3840 * 2160
profile-restore=copy
deband=no

[shorts]
profile-cond=duration < 60 and vid and not (p["current-tracks/video/albumart"] or p["current-tracks/video/image"])
profile-restore=copy
loop-file=inf
save-position-on-quit=no

[image]
profile-cond=p["current-tracks/video/image"]
profile-restore=copy-equal

[gray]
profile-cond=p["video-params/pixelformat"] == "gray"
profile-restore=copy-equal
scale=gaussian

[audio]
profile-cond=aid and (not vid or p["current-tracks/video/albumart"])
profile-restore=copy-equal
prefetch-playlist

[playing]
profile-cond=not pause
profile-restore=copy-equal
# ontop

[fullscreen]
profile-cond=fullscreen
profile-restore=copy-equal
# ontop

[minimized]
profile-cond=window_minimized
profile-restore=copy-equal
pause

[end]
profile-cond=eof_reached
profile-restore=copy-equal
fullscreen=no
window-maximized=no
